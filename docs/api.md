<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ViberPlay][1]
    -   [initializeAsync][2]
    -   [setLoadingProgress][3]
    -   [startGameAsync][4]
    -   [updateAsync][5]
    -   [shareAsync][6]
    -   [quit][7]
    -   [getLocale][8]
    -   [getEntryPointData][9]
    -   [onPause][10]
    -   [setSessionData][11]
    -   [getLeaderboardAsync][12]
    -   [subscribePlatformBotAsync][13]
    -   [getMessengerPlatform][14]
    -   [getInterstitialAdAsync][15]
    -   [getRewardedVideoAdAsync][16]
    -   [switchGameAsync][17]
    -   [getTrafficSource][18]
    -   [getEntryPointAsync][19]
    -   [context.getID][20]
    -   [context.getType][21]
    -   [context.isSizeBetween][22]
    -   [context.createAsync][23]
    -   [context.switchAsync][24]
    -   [context.chooseAsync][25]
    -   [context.getPlayersAsync][26]
    -   [player.getDataAsync][27]
    -   [player.setDataAsync][28]
    -   [player.flushDataAsync][29]
    -   [player.getID][30]
    -   [player.getName][31]
    -   [player.getPhoto][32]
    -   [player.getSignedPlayerInfoAsync][33]
    -   [player.getConnectedPlayersAsync][34]
    -   [player.canSubscribeBotAsync][35]
    -   [player.subscribeBotAsync][36]
    -   [payments.onReady][37]
    -   [payments.getCatalogAsync][38]
    -   [payments.purchaseAsync][39]
    -   [payments.getPurchasesAsync][40]
    -   [payments.consumePurchaseAsync][41]
-   [InitializationOptions][42]
-   [SignedPlayerInfo][43]
    -   [getPlayerID][44]
    -   [getSignature][45]
-   [ContextChoosePayload][46]
-   [ContextSizeResponse][47]
-   [Player][48]
    -   [getID][49]
    -   [getName][50]
    -   [getPhoto][51]
-   [Product][52]
-   [LeaderboardPlayer][53]
-   [Leaderboard][54]
    -   [getName][55]
    -   [getContextID][56]
    -   [getEntryCountAsync][57]
    -   [setScoreAsync][58]
    -   [getPlayerEntryAsync][59]
    -   [getEntriesAsync][60]
    -   [getConnectedPlayerEntriesAsync][61]
-   [ContextPlayer][62]
-   [ConnectedPlayer][63]
-   [LocalizableContent][64]
-   [SharePayload][65]
-   [AdInstance][66]
    -   [getPlacementID][67]
    -   [loadAsync][68]
    -   [showAsync][69]
-   [LeaderboardEntry][70]
    -   [getScore][71]
    -   [getFormattedScore][72]
    -   [getTimestamp][73]
    -   [getRank][74]
    -   [getExtraData][75]
    -   [getPlayer][76]
-   [PurchaseConfig][77]
-   [CustomUpdatePayload][78]
-   [Purchase][79]
-   [SignedPurchaseRequest][80]

## ViberPlay

Top level namespace wrapping the SDK's interfaces.

### initializeAsync

Initialize the SDK for the game. In the background, SDK will try to
setup environment and retrieve data for later use in the game.

**Parameters**

-   `options` **[InitializationOptions][81]?** Options to alter the runtime behavior of the SDK. Can be omitted.

Returns **[Promise][82]&lt;void>** 

### setLoadingProgress

Updates the load progress of the game. The value will be shown at the
loading screen.

**Parameters**

-   `percentage` **[number][83]** Represents percentage of loading progress. It should
    be between 0 and 100.

**Examples**

```javascript
ViberPlay.setLoadingProgress(50); // The game is halfway loaded
```

Returns **void** 

### startGameAsync

Starts the game. Calling this method will turn off the loading screen once
the initialization of SDK is done.

**Examples**

```javascript
ViberPlay.startGameAsync().then(function() {
  myAwesomeGame.start();
});
```

Returns **[Promise][82]&lt;void>** 

### updateAsync

Post an update to the corresponding context. If the game is played in
a messenger chat thread, this will post a message into the thread with
the specified image and text message. And when people launch the game
from this message, those game sessions will be able to read the specified
data through `ViberPlay.getEntryPointData()`.

**Parameters**

-   `payload` **[CustomUpdatePayload][84]** An object describes the update message.

**Examples**

```javascript
ViberPlay.updateAsync({
  action: 'CUSTOM',
  cta: 'Call to action text',
  image: base64Picture,
  text: {
    default: 'Some text',
    localizations: {
      ja_JP: 'テキスト',
      en_US: 'Some text',
    }
  }
  data: { someData: '...' },
  strategy: 'IMMEDIATE',
  notification: 'NO_PUSH',
}).then(function() {
  // After the update is posted, closes the game.
  ViberPlay.quit();
});
```

Returns **[Promise][82]&lt;void>** 

### shareAsync

Share a message with the player's contact.

**Parameters**

-   `payload` **[SharePayload][85]** An object describes the message to be shared.

**Examples**

```javascript
ViberPlay.shareAsync({
  intent: 'REQUEST',
  image: base64Picture,
  text: 'Some text',
  data: { someData: '...' },
}).then(function() {
  // continue with the game.
});
```

Returns **[Promise][82]&lt;void>** 

### quit

Close the game webview.
[TODO] Currently not working in Viber.\`

Returns **void** 

### getLocale

Locale code will be based on `navigator.language` in the WebView, format
will be align with [BCP47][86].

SDK will return the locale code as it is if it's one of the languages
listed below:

-   ab
-   av
-   az
-   ba
-   be
-   ce
-   cv
-   ka
-   kk
-   ky
-   tg
-   tk
-   tt
-   uk
-   uz
-   ru
-   hy
-   ja
-   en
-   es
-   fr

For the rest, it will return `en_US` as default.

**Examples**

```javascript
// Game developers can also do l10n fallback like this

const ruLangs = /^(ru|ab|hy|av|az|ba|be|ce|cv|ka|kk|ky|tg|tk|tt|uk|uz)/i;

if (ruLangs.test(ViberPlay.getLocale())) {
  loadRuL10n();
}
```

Returns **[string][87]** 

### getEntryPointData

Get the entry point data bound to this message.

Returns **[Object][88]** 

### onPause

[TODO]

Returns **void** 

### setSessionData

(Experimental) Update data associated with the current game session.

Session data is persistent only within the current game session and is
used to populate payload of game_play webhook events.

If called multiple times during a session, data specified in subsequent calls will be merged
with existing data at the top level.

**Parameters**

-   `sessionData` **[Object][88]** an arbitrary data object

**Examples**

```javascript
ViberPlay.setSessionData({
  "high-score": 1000,
  "current-stage": "stage1",
})
```

Returns **void** 

### getLeaderboardAsync

Get a leaderboard by its name

**Parameters**

-   `name` **[string][87]** The name of the leaderboard

**Examples**

```javascript
ViberPlay.getLeaderboardAsync('some_leaderboard')
  .then(leaderboard => {
    console.log(leaderboard.getName()); // 'some_leaderboard'
  });
```

Returns **[Promise][82]&lt;[Leaderboard][89]>** 

### subscribePlatformBotAsync

(Experimental) (Viber only) Subscribe the platform bot.

**Examples**

```javascript
if (ViberPlay.getMessengerPlatform() === 'VIBER') {
  ViberPlay.subscribePlatformBotAsync();
}
```

Returns **[Promise][82]&lt;null>** 

### getMessengerPlatform

Get the current messenger platform

**Examples**

```javascript
ViberPlay.getMessengerPlatform(); // 'VIBER'
```

Returns **MessengerPlatform** 

### getInterstitialAdAsync

(Experimental) Get AdInstance of an interstitial ad placement

**Parameters**

-   `placementId` **[string][87]** 

**Examples**

```javascript
ViberPlay.getInterstitialAdAsync('DUMMY_PLACEMENT_ID')
  .then((adInstance) => {
    // do something
  });
```

Returns **[Promise][82]&lt;InterstitialAdInstance>** 

### getRewardedVideoAdAsync

(Experimental) Get AdInstance of a rewarded video ad placement

**Parameters**

-   `placementId` **[string][87]** 

**Examples**

```javascript
ViberPlay.getRewardedVideoAdAsync('DUMMY_PLACEMENT_ID')
  .then((adInstance) => {
    // do something
  });
```

Returns **[Promise][82]&lt;RewardedVideoAdInstance>** 

### switchGameAsync

(Experimental) Request to switch to another game

**Parameters**

-   `gameId` **[string][87]** the game ID of the target game
-   `data` **[Object][88]?** TODO the entry point data for the target game

**Examples**

```javascript
ViberPlay.switchGameAsync('arrQ8wIzzfBHsR0Cerroqns8ledhtug5', {
  from: 'prequel-game'
}).catch((e) => {
  // handling cases when failed to switch to the target game
});
```

Returns **[Promise][82]&lt;null>** 

### getTrafficSource

(Experimental) (Viber only) Get traffic source related url params set
on the game's wrapper.

**Examples**

```javascript
// Should be called after ViberPlay.initializeAsync() resolves
const trafficSource = ViberPlay.getTrafficSource();
console.log(trafficSource['utm_source']); // 'viber'
```

### getEntryPointAsync

(Experimental) Get information about where the game is started.
Details about available entry points can be found at
[entry-points.md][90].

**Examples**

```javascript
ViberPlay.getEntryPointAsync().then(console.log); // 'game_switch'
```

### context.getID

Get id of context

### context.getType

Get type of context

### context.isSizeBetween

Check if the count of players in context is between given numbers

### context.createAsync

Create context with player

**Parameters**

-   `playerId`  Player ID of the player

### context.switchAsync

Switch context by context id

**Parameters**

-   `playerId`  Context ID of the context

### context.chooseAsync

Popup a friend dialog to establish context

**Parameters**

-   `payload`  An object describes the choose context

### context.getPlayersAsync

Get an array of ContextPlayer containing players in the same context

### player.getDataAsync

Will get an object representing game data saved on the hosted platform.

**Parameters**

-   `keys`  An array of unique keys to retrieve data for.

**Examples**

```javascript
ViberPlay.player
  .getDataAsync(['hp', 'items'])
  .then(function(data) {
    console.log('data is loaded');
    var hp = data['hp'];
    var items = data['items'];
  });
```

Returns **any** Latest snapshot of game data

### player.setDataAsync

Will send update of game data to the hosted platform's server. The update
will be merged into existing game data.

Please be careful not to store a game data bigger than 1000 characters
when stringified, which will cause the modification be rejected.

**Parameters**

-   `data`  An object containing a set of key-value pairs to be
    stored on the hosted platform. The object must contain only serializable
    values - any non-serializable values will cause the entire modification
    to be rejected. Nullable value will be treated as removal of the key-value
    pair.

**Examples**

```javascript
ViberPlay.player
 .setDataAsync({
   items: ['item1', 'item2', 'item3'],
   hp: 123,
 })
 .then(function() {
   console.log('data is set');
 });
```

Returns **any** Latest snapshot of game data

### player.flushDataAsync

Will flush unsaved data to cloud storage

### player.getID

Get the player's ID.

**Examples**

```javascript
// Should be called after ViberPlay.initializeAsync() resolves
var playerID = ViberPlay.player.getID();
```

Returns **any** Player's ID

### player.getName

Get the player's name.

**Examples**

```javascript
// Should be called after ViberPlay.initializeAsync() resolves
var playerName = ViberPlay.player.getName();
```

Returns **any** Player's name

### player.getPhoto

Get the player's photo.

**Examples**

```javascript
var playerImage = new Image();
playerImage.crossOrigin = 'anonymous';
// Should be called after ViberPlay.initializeAsync() resolves.
playerImage.src = ViberPlay.player.getPhoto();
```

Returns **any** URL of player photo

### player.getSignedPlayerInfoAsync

Get a `SignedPlayerInfo` object with encrypted player's info. This can
be useful for game server to detect if the user's identity is really
sent from the hosted platform or tampered.

Please read `SignedPlayerInfo` for more information on how to use this.

**Parameters**

-   `payload`  An arbitary string to tag the signature

**Examples**

```javascript
ViberPlay.player.getSignedPlayerInfoAsync('some_metadata')
 .then(function (result) {
   // The verification of the ID and signature should happen on
   // server side.
   sendToGameServer(
     result.getPlayerID(), // same value as ViberPlay.player.getID()
     result.getSignature(),
     'GAIN_COINS',
     100);
 });
```

Returns **any** An object with encrypted player info

### player.getConnectedPlayersAsync

This returns an array containing all contacts of the user.
It doesn't filter users to those already playing this game.

**Examples**

```javascript
var connectedPlayers = ViberPlay.player.getConnectedPlayersAsync()
  .then(function(players) {
    console.log(players.map(function(player) {
      return {
        id: player.getID(),
        name: player.getName(),
      }
    }));
  });
// [{id: '123456789', name: 'foo'}, {id: '234567890', name: 'bar'}]
```

Returns **any** Array of connected players

### player.canSubscribeBotAsync

(Experimental) Checks if the current user can subscribe
the game's bot.
Please note that this API is currently a stub that only resolves
with true.

**Examples**

```javascript
ViberPlay.player.canSubscribeBotAsync()
  .then((result) => console.log(result));
```

Returns **any** Resolves with true if user can subscribe bot

### player.subscribeBotAsync

(Experimental) Start the process to subscribe the game's bot. Game
must check with ViberPlay.player.canSubscribeBotAsync() before this
API is called.
Please note that this API can terminate the game's window and navigate
user to the game's bot screen to start subscribing.

**Examples**

```javascript
ViberPlay.player.canSubscribeBotAsync()
  .then((result) => {
    if (!result) {
      throw new Error('CAN_NOT_SUBSCRIBE');
    }
    return ViberPlay.player.subscribeBotAsync();
  }))
  .then(() => console.log('ok'))
  .catch((err) => console.error(err));
```

Returns **any** 

### payments.onReady

(Experimental) Register a callback function when payments feature is
ready.
Please note that if the client is not payments supported, the callback
will never be executed.

**Examples**

```javascript
ViberPlay.payments.onReady(function () {
  console.log('Ready to receive payments requests')
})
```

Returns **any** 

### payments.getCatalogAsync

(Experimental) Get in-app purchase catalog of the current game.

**Examples**

```javascript
ViberPlay.payments.getCatalogAsync().then((catalog) => {
  console.log(catalog)
})
```

Returns **any** Array of products with pricing information

### payments.purchaseAsync

(Experimental) Initialize a purchase attempt on the specified in-app 
purchase product.
When purchase result is returned, game developers are adviced to verify
the signature on a game server. If the purchase passed the verification,
it should be consumed as soon as possible.

**Parameters**

-   `config`  An object containing purchase configuration information

**Examples**

```javascript
ViberPlay.payments.purchaseAsync({
  productID: 'someProduct',
  developerPayload: 'somePayload'
}).then((purchase) => {
  console.log(purchase)
})
```

Returns **any** Purchase result

### payments.getPurchasesAsync

(Experimental) Get a list of unconsumed purchases.
This is useful for games to double check if there's unconsumed purchase
should be processed.

**Examples**

```javascript
ViberPlay.payments.getPurchasesAsync().then((purchases) => {
  console.log(purchases);
})
```

Returns **any** 

### payments.consumePurchaseAsync

(Experimental) Consume the specified purchase. 
Games must provision related game items when a purchase is consumed.

**Parameters**

-   `purchaseToken`  A string of purchase token used for consumption

**Examples**

```javascript
ViberPlay.payments.consumePurchaseAsync('somePurchaseToken').then(() => {
  console.log('Purchase is consumed');
})
```

Returns **any** 

## InitializationOptions

Type: [Object][88]

**Properties**

-   `useLegacyLeaderboard` **[boolean][91]** if set to true the legacy leaderboard service will be used

## SignedPlayerInfo

Represents player info in a secure way, encrypted by the server side of
the platform hosting the game.
Game server can decrypt this info on to verify if this is data is really
sent from the platform.

### getPlayerID

Get the player's ID

**Examples**

```javascript
ViberPlay.player.getSignedPlayerInfoAsync('some_metadata')
 .then(function (result) {
   result.getPlayerID(), // same value as ViberPlay.player.getID()
 });
```

Returns **[string][87]** Player ID

### getSignature

Get the signature string

On the game server, please validate this signature by the following steps:

1.  Split the signature into two parts delimited by the `.` character.
2.  Decode the first part with base64url encoding.
3.  Decode the second part with base64url encoding, which should be a
    string representation of an JSON object with fields below:

    -   algorithm - Always `HMAC-SHA256`
    -   issued_at - A UNIX timestamp representing the time signature
        is issued
    -   player_id - ID of the player
    -   request_payload - the requestPayload string you defined when
        calling `ViberPlay.player.getSignedPlayerInfoAsync`

4.  Hash the second part string using HMAC SHA-256 and your app
    secret, check if it is identical to the first part string.
5.  You may also wish to validate the timestamp to see if the request was
    made recently.

**Examples**

```javascript
ViberPlay.player.getSignedPlayerInfoAsync('some_metadata')
 .then(function (result) {
   result.getSignature(); // some string like this, 'S0M3_5igNatvR3.eyJpc3N1ZWRfYXQiOiAxNTM5OTMxNDQ2LCAicGxheWVyX2lkIjogIjgwZDU4N2UyODkzNjdlNTVhZjRhNGQ0OTIyOThkNmRkNDdjMGFiYmMyMjc1YjNjMDQ0ODkyMTY2ZGE3MzM5NmYiLCAiYWxnb3JpdGhtIjogIkhNQUMtU0hBMjU2IiwgInJlcXVlc3RfcGF5bG9hZCI6ICJteV9tZXRhZGF0YSJ9'
 });
```

Returns **[string][87]** Signature

## ContextChoosePayload

Type: [Object][88]

**Properties**

-   `filters` **(`"NEW_CONTEXT_ONLY"` \| `"INCLUDE_EXISTING_CHALLENGES"` \| `"NEW_PLAYERS_ONLY"`)?** Filters
-   `maxSize` **[number][83]** Context maximum size for matching
-   `minSize` **[number][83]** Context minimum size for matching

## ContextSizeResponse

Type: [Object][88]

**Properties**

-   `answer` **[boolean][91]** Result
-   `minSize` **[number][83]** The minimum bound of the context size query
-   `maxSize` **[number][83]** The maximum bound of the context size query.

## Player

Representing a player.

### getID

Get the player's ID.

**Examples**

```javascript
player.getID(); // '5458282176661711'
```

Returns **[string][87]** Player ID

### getName

Get the player's name.

**Examples**

```javascript
player.getName(); // 'Alpha Omega'
```

Returns **[string][87]** Player name

### getPhoto

Get the player's photo.

**Examples**

```javascript
player.getPhoto(); // A CORS supported URL to user's photo
```

Returns **[string][87]** URL of player photo

## Product

Type: [Object][88]

**Properties**

-   `title` **[string][87]** Title of the product
-   `productID` **[string][87]** ID of the product
-   `description` **[string][87]?** Text description of the product
-   `imageURI` **[string][87]?** A URL to the product's image
-   `price` **[string][87]** A localized string representing the product's pirce in the local currency, e.g. "$1"
-   `priceCurrencyCode` **[string][87]** A string representing which currency is the price calculated in, following [ISO 4217][92]

## LeaderboardPlayer

**Extends Player**

Representing a leaderboard player.

## Leaderboard

Representing a leaderboard. Can be retrieved by calling
`ViberPlay.getLeaderboardAsync()`.

### getName

Get the leaderboard's name.

**Examples**

```javascript
ViberPlay.getLeaderboardAsync('global_leaderboard')
  .then((leaderboard) => {
    leaderboard.getName(); // 'global_leaderboard'
  });
```

```javascript
ViberPlay.getLeaderboardAsync('context_leaderboard.8183471902')
  .then((leaderboard) => {
    leaderboard.getName(); // 'context_leaderboard.8183471902'
  });
```

Returns **[string][87]** Leaderboard name

### getContextID

Get ID of the context which the leaderboard belongs to. Returns `null` if
the leaderboard is not related to any context.

**Examples**

```javascript
ViberPlay.getLeaderboardAsync('context_leaderboard.8183471902')
  .then((leaderboard) => {
    leaderboard.getContextId(); // '8183471902'
  });
```

Returns **[string][87]?** Related context ID

### getEntryCountAsync

Get total number of entries inside the leaderboard.

**Examples**

```javascript
ViberPlay.getLeaderboardAsync('context_leaderboard.8183471902')
  .then((leaderboard) => {
    leaderboard.getEntryCountAsync().then((count) => {
      console.log('count: ', count); // count: 2
    });
  });
```

Returns **[Promise][82]&lt;[number][83]>** Total number of entries

### setScoreAsync

Submit score to the leaderboard and get the latest entry. A player can only
have one entry. If there's already an old entry, it will be only updated to
the a better score.

**Parameters**

-   `score` **[number][83]** The new score
-   `extraData` **[string][87]?** A string payload can be attached to the entry as extra info

**Examples**

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getScore(); // 100
  });
```

Returns **[Promise][82]&lt;[LeaderboardEntry][93]>** Entry info

### getPlayerEntryAsync

Get current player's entry. Returns `null` if there isn't one.

**Examples**

```javascript
leaderboard.getPlayerEntryAsync()
  .then((entry) => {
    if (!entry) {
      console.log('No player entry found');
      return;
    }

    entry.getScore(); // 100
  });
```

Returns **[Promise][82]&lt;[LeaderboardEntry][93]?>** Entry info

### getEntriesAsync

Get a list of entries inside the leaderboard based on the count and rank
offset specified

**Parameters**

-   `count` **[number][83]** The number of maximum entries to be retruned
-   `offset` **[number][83]** The offset in the leaderborad (from the top) the entries to be returned

**Examples**

```javascript
// Get top 10 entries
leaderboard.getEntriesAsync(10, 0)
  .then((entries) => {
    console.log(entries.length); // 10 if there're >= 10 entries
  });
```

Returns **[Promise][82]&lt;[Array][94]&lt;[LeaderboardEntry][93]>>** Array of entry info

### getConnectedPlayerEntriesAsync

Get a list of connected player entries inside the leaderboard based on the count and rank
offset specified

**Parameters**

-   `count` **[number][83]** The number of maximum entries to be retruned
-   `offset` **[number][83]** The offset in the leaderborad (from the top) the entries to be returned

**Examples**

```javascript
// Get top 10 friend entries
leaderboard.getConnectedPlayerEntriesAsync(10, 0)
  .then((entries) => {
    console.log(entries.length); // 10 if there're >= 10 friend entries
  });
```

Returns **[Promise][82]&lt;[Array][94]&lt;[LeaderboardEntry][93]>>** Array of entry info

## ContextPlayer

**Extends Player**

Representing a context player.

## ConnectedPlayer

**Extends Player**

Representing a connected player.

## LocalizableContent

LocalizableContent
To provide localized versions of your own call to action, pass an object
with the default cta as the value of 'default' and another object mapping
locale keys to translations as the value of 'localizations'.

Type: [Object][88]

**Properties**

-   `default` **[string][87]** The text to be used if no suitable text is
    found.
-   `ja_JP` **[string][87]?** The text to be used for ja_JP locale.
-   `en_US` **[string][87]?** The text to be used for en_US locale.

## SharePayload

Type: [Object][88]

**Properties**

-   `intent` **(`"INVITE"` \| `"REQUEST"` \| `"CHALLENGE"` \| `"SHARE"`)** [TODO]
    Represents content to be shared by the user.
-   `image` **[string][87]** A string containing data URL of a base64
    encoded image.
-   `text` **[string][87]** Text message of this share.
-   `data` **[Object][88]?** An object to be passed to any session launched
    from this update. It can be accessed from `ViberPlay.getEntryPointData()`.
    Its size must be &lt;= 1000 chars when stringified.

## AdInstance

(Experimental) Representing an ad.

### getPlacementID

(Experimental) Get the ad's placement ID.

**Examples**

```javascript
adInstance.getPlacementID(); // '5458282176661711'
```

Returns **[string][87]** Placement ID

### loadAsync

(Experimental) Start loading ad.
Notes: On Android, the interstitial ad will start autoplaying right
after it's loaded. To give the best result, please start loading the
interstitial ad right before you want to show it.

**Examples**

```javascript
// after adInstance is created
adInstance.loadAsync();
```

Returns **[string][87]** 

### showAsync

(Experimental) Show the loaded ad to player. The returned promise will be only resolved
when user closed the ad's overlay.

**Examples**

```javascript
// after adInstance is loaded
adInstance.showAsync();
```

Returns **[Promise][82]&lt;void>** 

## LeaderboardEntry

Represent a leaderboard entry. An entry is created when a player submit score
to the leaderboard for the first time. After creation, the entry will be
only updated when a better score is submit by this player.

### getScore

Get the score of this entry.

**Examples**

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getScore(); // 100
  });
```

Returns **[number][83]** Score

### getFormattedScore

Get the formatted score of this entry. Format is based on the
leaderboard's setting.

**Examples**

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getFormattedScore(); // '100pt'
  });
```

Returns **[string][87]** Formatted score

### getTimestamp

Get the timestamp of when the entry is updated or created for the last
time.

**Examples**

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getTimestamp(); // 1527810893
  });
```

Returns **[number][83]** Timestamp of last update or creation

### getRank

Get the rank of this player. It's calculated based on the entry's score
and the leaderboard's sort setting.

**Examples**

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getRank(); // 2
  });
```

Returns **[number][83]** Rank

### getExtraData

Get the extra data submit with the last update. Returns `null` if no
extra data exists.

**Examples**

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getExtraData(); // 'Hello world'
  });
```

Returns **[string][87]?** Extra data appended with last update or creation

### getPlayer

Get the player's info of this entry.

**Examples**

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getPlayer().getID(); // '5458282176661711'
  });
```

Returns **[LeaderboardPlayer][95]** Player's info

## PurchaseConfig

Type: [Object][88]

**Properties**

-   `productID` **[string][87]** ID of the product
-   `developerPayload` **[string][87]?** An optional payload can be assigned by game developer, which will be attached in the signed purchase request

## CustomUpdatePayload

Type: [Object][88]

**Properties**

-   `action` **[string][87]** This should be 'CUSTOM'.
-   `template` **[string][87]** [TODO] ID of the template this custom
    update is using. Templates should be predefined in fbapp-config.json.
    See the [Bundle Config documentation][https://developers.facebook.com/docs/games/instant-games/bundle-config][96]
    for documentation about fbapp-config.json.
-   `cta` **([string][87]? | [LocalizableContent][97]?)** [TODO] An optional
    call-to-action button text. By default we will use a localized 'Play'
    as the button text.
-   `image` **[string][87]** A string containing data URL of a base64
    encoded image.
-   `text` **([string][87] \| [LocalizableContent][97])** Text message of this update.
-   `data` **[Object][88]?** An object to be passed to any session launched
    from this update. It can be accessed from `ViberPlay.getEntryPointData()`.
    Its size must be &lt;= 1000 chars when stringified.
-   `strategy` **(`"IMMEDIATE"` \| `"LAST"` \| `"IMMEDIATE_CLEAR"`)?** [TODO] Defines how the update should be delivered.
    'IMMEDIATE': The update should be posted immediately.
    'LAST': The update should be posted when the game session ends. The most
    recent update sent using the 'LAST' strategy will be the one sent.
    'IMMEDIATE_CLEAR': The update is posted immediately, and clears any other
    pending updates (such as those sent with the 'LAST' strategy).If no strategy is specified, we default to 'IMMEDIATE'.
-   `notification` **(`"NO_PUSH"` \| `"PUSH"`)?** Specifies notification
    setting for the custom update. This can be 'NO_PUSH' or 'PUSH', and defaults
    to 'NO_PUSH'. Use push notification only for updates that are high-signal
    and immediately actionable for the recipients. Also note that push
    notification is not always guaranteed, depending on user setting and
    platform policies.

## Purchase

Type: [Object][88]

**Properties**

-   `developerPayload` **[string][87]?** An optional payload can be assigned by game developer, which will be attached in the signed purchase request
-   `paymentID` **[string][87]** ID of the payment
-   `productID` **[string][87]** ID of the purchased product
-   `purchaseTime` **[number][83]** A UNIX timestamp representing the time purchase is made
-   `purchaseToken` **[number][83]** A token used for consuming the purchase
-   `signedRequest` **[SignedPurchaseRequest][98]** A signed request of this purchase

## SignedPurchaseRequest

On your game server, please validate this signature 
by the following steps:

1.  Split the signature into two parts delimited by the `.` character.
2.  Decode the first part with base64url encoding.
3.  Decode the second part with base64url encoding, which should be a
    string representation of an JSON object with fields below:

    -   algorithm - Always `HMAC-SHA256`

-   is_consumed - Representing the consumption state of the purchase
    -   issued_at - A UNIX timestamp representing the time signature
        is issued
    -   payment_id - ID of the payment
    -   product_id - ID of the purchased product
    -   purchase_time - A UNIX timestamp representing the time purchase is made
    -   purchase_token - A token used for consuming the purchase

4.  Hash the second part string using HMAC SHA-256 and your app
    secret, check if it is identical to the first part string.
5.  You may also wish to validate the timestamp to see if the request was
    made recently.

Type: [string][87]

[1]: #viberplay

[2]: #initializeasync

[3]: #setloadingprogress

[4]: #startgameasync

[5]: #updateasync

[6]: #shareasync

[7]: #quit

[8]: #getlocale

[9]: #getentrypointdata

[10]: #onpause

[11]: #setsessiondata

[12]: #getleaderboardasync

[13]: #subscribeplatformbotasync

[14]: #getmessengerplatform

[15]: #getinterstitialadasync

[16]: #getrewardedvideoadasync

[17]: #switchgameasync

[18]: #gettrafficsource

[19]: #getentrypointasync

[20]: #contextgetid

[21]: #contextgettype

[22]: #contextissizebetween

[23]: #contextcreateasync

[24]: #contextswitchasync

[25]: #contextchooseasync

[26]: #contextgetplayersasync

[27]: #playergetdataasync

[28]: #playersetdataasync

[29]: #playerflushdataasync

[30]: #playergetid

[31]: #playergetname

[32]: #playergetphoto

[33]: #playergetsignedplayerinfoasync

[34]: #playergetconnectedplayersasync

[35]: #playercansubscribebotasync

[36]: #playersubscribebotasync

[37]: #paymentsonready

[38]: #paymentsgetcatalogasync

[39]: #paymentspurchaseasync

[40]: #paymentsgetpurchasesasync

[41]: #paymentsconsumepurchaseasync

[42]: #initializationoptions

[43]: #signedplayerinfo

[44]: #getplayerid

[45]: #getsignature

[46]: #contextchoosepayload

[47]: #contextsizeresponse

[48]: #player

[49]: #getid

[50]: #getname

[51]: #getphoto

[52]: #product

[53]: #leaderboardplayer

[54]: #leaderboard

[55]: #getname-1

[56]: #getcontextid

[57]: #getentrycountasync

[58]: #setscoreasync

[59]: #getplayerentryasync

[60]: #getentriesasync

[61]: #getconnectedplayerentriesasync

[62]: #contextplayer

[63]: #connectedplayer

[64]: #localizablecontent

[65]: #sharepayload

[66]: #adinstance

[67]: #getplacementid

[68]: #loadasync

[69]: #showasync

[70]: #leaderboardentry

[71]: #getscore

[72]: #getformattedscore

[73]: #gettimestamp

[74]: #getrank

[75]: #getextradata

[76]: #getplayer

[77]: #purchaseconfig

[78]: #customupdatepayload

[79]: #purchase

[80]: #signedpurchaserequest

[81]: #initializationoptions

[82]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[83]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[84]: #customupdatepayload

[85]: #sharepayload

[86]: http://www.ietf.org/rfc/bcp/bcp47.txt

[87]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[88]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[89]: #leaderboard

[90]: ./entry-points.md

[91]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[92]: https://en.wikipedia.org/wiki/ISO_4217

[93]: #leaderboardentry

[94]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[95]: #leaderboardplayer

[96]: https://developers.facebook.com/docs/games/instant-games/bundle-config

[97]: #localizablecontent

[98]: #signedpurchaserequest
